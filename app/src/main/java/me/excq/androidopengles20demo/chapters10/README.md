## 贝赛尔曲线

> 转载自：<https://zhuanlan.zhihu.com/p/111611096>

### 什么是贝赛尔曲线

贝赛尔曲线线 1962 年，由法国工程师皮埃尔·贝济埃所广泛发表，
他运用贝赛尔曲线来为汽车的主体进行设计，可以设计出曲线形车身。

贝塞尔曲线主要用于二维图形应用程序中的数学曲线，
曲线主要由起始点，终止点和控制点组成，通过调整控制点，绘制贝塞尔曲线开关则会随之发生变化。
贝塞尔曲线现在已广泛用于计算机图形、动画、字体等，基本上每个现代图形编辑器都支持他。

一些比较常见的一阶、二阶和三阶贝塞尔曲线：

一阶贝塞尔曲线

```
P(t) = (1 - t)*P0 + t*P1
```

二阶贝塞尔曲线

```
P(t) = (1 - t)^2 * P0 + 2t * (1 - t) * P1 + t^2 * P2
```

三阶贝塞尔曲线

```
P(t) = (1 - t)^3 * P0 + 3t * (1 - t)^2 * P1 + 3t^2 * (1 - t) * P2 + t^3 * P3
```

通过上述公式，我们设置好起始点，终止点和控制点，贝塞尔曲线就是由 t 在 [0, 1] 区间对应的无数个点组成。

当然我们实际在设备上绘制时，不可能绘制出无数个点，
一般是根据屏幕像素的大小，对 t 区间进行适当的等间隔插值，再由输出的点组成我们想要的贝塞尔曲线
（此时肉眼分辨不出来两点之间的距离，可以认为他们连成了一条线）。

OpenGL ES 的基本绘制单位是点、线和三角形，既然可以绘制点，只需要基于上述公式计算出点，
然后将其绘制出来，即可得到我们想要的贝塞尔曲线。

以绘制三阶贝塞尔曲线为例，用 GLSL 实现该函数，
然后我们从外部输入一组 t 的取值数组，便可以得到一组对应的用于绘制三阶贝塞尔曲线的点。

```glsl
vec2 bezier_3order(attribute vec2 po, attribute vec2 p1, attribute vec2 p3, attribute float t) {
    float tt = (1.0 - t) * (1.0 - t)
    float ttt = tt * (1.0 - t)

    return ttt * p0 + 3.0 * t * tt * pi + 3 * t * t * (1.0 -t) * p2 + t * t * t * p3
}
```

借助于 GLSL 的内置混合函数 mix，我们可以在用于绘制贝塞尔曲线的点之间进行插值，相当于对上述函数 `bezier_3order` 进行优化：

```glsl
```

todo 太晚了，明天再把使用贝塞尔曲线插值画笔功能写了，现在睡觉了，晚安。